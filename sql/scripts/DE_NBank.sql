-- MySQL Script generated by MySQL Workbench
-- Wed Sep  5 11:57:40 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema bd_bank
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema bd_bank
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `bd_bank` DEFAULT CHARACTER SET utf8 ;
USE `bd_bank` ;

-- -----------------------------------------------------
-- Table `bd_bank`.`tadmin`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tadmin` (
  `idadmin` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `lastName` VARCHAR(45) NULL DEFAULT NULL,
  `img` VARCHAR(45) NULL DEFAULT NULL,
  `email` VARCHAR(45) NULL DEFAULT NULL,
  `password` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idadmin`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`tbank`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tbank` (
  `idbank` INT(11) NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NULL,
  `capital` DECIMAL(20,0) NULL DEFAULT NULL,
  `address` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idbank`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`tdirectorAgencie`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tdirectorAgencie` (
  `idtdirectorAgencie` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `lastName` VARCHAR(45) NULL DEFAULT NULL,
  `img` VARCHAR(45) NULL DEFAULT NULL,
  `salary` DECIMAL(22,6) NULL DEFAULT NULL,
  PRIMARY KEY (`idtdirectorAgencie`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd_bank`.`tagencies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tagencies` (
  `idagencies` INT(11) NOT NULL AUTO_INCREMENT,
  `agencyNumber` VARCHAR(45) NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `address` VARCHAR(45) NULL DEFAULT NULL,
  `idbank` INT(11) NOT NULL,
  `idtdirectorAgencie` INT(11) NOT NULL,
  PRIMARY KEY (`idagencies`),
  INDEX `fk_tagencies_tbank1_idx` (`idbank` ASC),
  INDEX `fk_tagencies_tdirectorAgencie1_idx` (`idtdirectorAgencie` ASC),
  CONSTRAINT `fk_tagencies_tbank1`
    FOREIGN KEY (`idbank`)
    REFERENCES `bd_bank`.`tbank` (`idbank`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tagencies_tdirectorAgencie1`
    FOREIGN KEY (`idtdirectorAgencie`)
    REFERENCES `bd_bank`.`tdirectorAgencie` (`idtdirectorAgencie`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`temployee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`temployee` (
  `idemployee` INT(11) NOT NULL AUTO_INCREMENT,
  `employeeNumber` VARCHAR(45) NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `lastName` VARCHAR(45) NULL DEFAULT NULL,
  `img` VARCHAR(45) NULL,
  `hiringDate` DATE NULL DEFAULT NULL,
  `idagencies` INT(11) NOT NULL,
  PRIMARY KEY (`idemployee`),
  INDEX `fk_temployee_tagencies1_idx` (`idagencies` ASC),
  CONSTRAINT `fk_temployee_tagencies1`
    FOREIGN KEY (`idagencies`)
    REFERENCES `bd_bank`.`tagencies` (`idagencies`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`tclient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tclient` (
  `idclient` INT(11) NOT NULL AUTO_INCREMENT,
  `clientNumber` VARCHAR(45) NULL DEFAULT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `lastName` VARCHAR(45) NULL DEFAULT NULL,
  `img` VARCHAR(45) NULL DEFAULT NULL,
  `address` VARCHAR(45) NULL DEFAULT NULL,
  `cardNumber` VARCHAR(45) NULL DEFAULT NULL,
  `nip` VARCHAR(45) NULL DEFAULT NULL,
  `idagencies` INT(11) NOT NULL,
  `idemployee` INT(11) NOT NULL,
  PRIMARY KEY (`idclient`),
  INDEX `fk_tclient_tagencies1_idx` (`idagencies` ASC),
  INDEX `fk_tclient_temployee1_idx` (`idemployee` ASC),
  CONSTRAINT `fk_tclient_tagencies1`
    FOREIGN KEY (`idagencies`)
    REFERENCES `bd_bank`.`tagencies` (`idagencies`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tclient_temployee1`
    FOREIGN KEY (`idemployee`)
    REFERENCES `bd_bank`.`temployee` (`idemployee`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`tdirectorgeneral`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tdirectorgeneral` (
  `iddirector` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `lastName` VARCHAR(45) NULL DEFAULT NULL,
  `img` VARCHAR(45) NULL DEFAULT NULL,
  `salary` DECIMAL NULL DEFAULT NULL,
  `idbank` INT(11) NOT NULL,
  PRIMARY KEY (`iddirector`, `idbank`),
  INDEX `fk_tdirector_tbank1_idx` (`idbank` ASC),
  CONSTRAINT `fk_tdirector_tbank1`
    FOREIGN KEY (`idbank`)
    REFERENCES `bd_bank`.`tbank` (`idbank`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`taccounttype`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`taccounttype` (
  `idaccounttype` INT(11) NOT NULL AUTO_INCREMENT,
  `accountType` VARCHAR(45) NULL DEFAULT NULL,
  `commission` DECIMAL(11,6) NULL DEFAULT NULL,
  `overdraft` DECIMAL(11,6) NULL DEFAULT NULL,
  `interesRate` DECIMAL(11,6) NULL,
  PRIMARY KEY (`idaccounttype`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd_bank`.`taccount`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`taccount` (
  `idaccouunt` INT(11) NOT NULL,
  `number` VARCHAR(45) NULL DEFAULT NULL,
  `balance` DECIMAL(11,0) NULL DEFAULT NULL,
  `openDate` DATETIME NULL DEFAULT NULL,
  `idaccounttype` INT(11) NOT NULL,
  `idclient` INT(11) NOT NULL,
  `idemployee` INT(11) NOT NULL,
  `idagencies` INT(11) NOT NULL,
  PRIMARY KEY (`idaccouunt`),
  INDEX `fk_taccount_taccounttype1_idx` (`idaccounttype` ASC),
  INDEX `fk_taccount_tclient1_idx` (`idclient` ASC, `idemployee` ASC, `idagencies` ASC),
  CONSTRAINT `fk_taccount_taccounttype1`
    FOREIGN KEY (`idaccounttype`)
    REFERENCES `bd_bank`.`taccounttype` (`idaccounttype`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_taccount_tclient1`
    FOREIGN KEY (`idclient`)
    REFERENCES `bd_bank`.`tclient` (`idclient`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `bd_bank`.`ttransaction`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`ttransaction` (
  `idtransaction` INT(11) NOT NULL AUTO_INCREMENT,
  `comission` DECIMAL(11,6) NULL DEFAULT NULL,
  `overdraft` DECIMAL(11,6) NULL DEFAULT NULL,
  `balance` DECIMAL(11,6) NULL DEFAULT NULL,
  `interestRate` DECIMAL(11,6) NULL DEFAULT NULL,
  `transactionDate` DATETIME NULL DEFAULT NULL,
  `taccount_idaccouunt` INT(11) NOT NULL,
  `idclient` INT(11) NOT NULL,
  `idemployee` INT(11) NOT NULL,
  `idagencies` INT(11) NOT NULL,
  PRIMARY KEY (`idtransaction`),
  INDEX `fk_ttransaction_taccount1_idx` (`taccount_idaccouunt` ASC, `idclient` ASC, `idemployee` ASC, `idagencies` ASC),
  CONSTRAINT `fk_ttransaction_taccount1`
    FOREIGN KEY (`taccount_idaccouunt`)
    REFERENCES `bd_bank`.`taccount` (`idaccouunt`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd_bank`.`tarea`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`tarea` (
  `codearea` VARCHAR(3) NOT NULL,
  `description` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`codearea`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bd_bank`.`temploy_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bd_bank`.`temploy_area` (
  `idemployee` INT(11) NOT NULL,
  `codearea` VARCHAR(3) NOT NULL,
  PRIMARY KEY (`idemployee`, `codearea`),
  INDEX `fk_temploy_area_area1_idx` (`codearea` ASC),
  CONSTRAINT `fk_temploy_area_temployee1`
    FOREIGN KEY (`idemployee`)
    REFERENCES `bd_bank`.`temployee` (`idemployee`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_temploy_area_area1`
    FOREIGN KEY (`codearea`)
    REFERENCES `bd_bank`.`tarea` (`codearea`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
